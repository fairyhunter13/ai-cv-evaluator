<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI CV Evaluator - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="icon" type="image/svg+xml" href="/admin/static/favicon.svg">
</head>
<body class="bg-gray-50">
    <div id="app">
        <!-- Navigation -->
        <nav class="bg-white shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center">
                        <h1 class="text-xl font-semibold text-gray-900">AI CV Evaluator Admin</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm text-gray-500">Welcome, {{.Username}}</span>
                        <form method="POST" action="/admin/logout" class="inline">
                            <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
                            <button type="submit" class="text-sm text-gray-500 hover:text-gray-700">Logout</button>
                        </form>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
            <!-- Dashboard Grid -->
            <div class="px-4 py-6 sm:px-0">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    
                    <!-- Upload Card -->
                    <div class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-4 py-5 sm:p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-8 w-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                    </svg>
                                </div>
                                <div class="ml-5 w-0 flex-1">
                                    <dl>
                                        <dt class="text-sm font-medium text-gray-500 truncate">Upload Documents</dt>
                                        <dd class="text-lg font-medium text-gray-900">CV & Project Files</dd>
                                    </dl>
                                </div>
                            </div>
                            <div class="mt-5">
                                <a href="/admin/upload" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out block text-center">
                                    Upload Files
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Evaluate Card -->
                    <div class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-4 py-5 sm:p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-8 w-8 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                </div>
                                <div class="ml-5 w-0 flex-1">
                                    <dl>
                                        <dt class="text-sm font-medium text-gray-500 truncate">Start Evaluation</dt>
                                        <dd class="text-lg font-medium text-gray-900">AI-Powered Analysis</dd>
                                    </dl>
                                </div>
                            </div>
                            <div class="mt-5">
                                <a href="/admin/evaluate" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out block text-center">
                                    Start Evaluation
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Results Card -->
                    <div class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-4 py-5 sm:p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-8 w-8 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                    </svg>
                                </div>
                                <div class="ml-5 w-0 flex-1">
                                    <dl>
                                        <dt class="text-sm font-medium text-gray-500 truncate">View Results</dt>
                                        <dd class="text-lg font-medium text-gray-900">Evaluation Reports</dd>
                                    </dl>
                                </div>
                            </div>
                            <div class="mt-5">
                                <a href="/admin/result" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out block text-center">
                                    View Results
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- RAG Management Card -->
                    <div class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-4 py-5 sm:p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-8 w-8 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"/>
                                    </svg>
                                </div>
                                <div class="ml-5 w-0 flex-1">
                                    <dl>
                                        <dt class="text-sm font-medium text-gray-500 truncate">RAG Management</dt>
                                        <dd class="text-lg font-medium text-gray-900">Manage Corpora</dd>
                                    </dl>
                                </div>
                            </div>
                            <div class="mt-5">
                                <a href="/admin/rag" class="w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out block text-center">
                                    Manage RAG
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- System Status Card -->
                    <div class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-4 py-5 sm:p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-8 w-8 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/>
                                    </svg>
                                </div>
                                <div class="ml-5 w-0 flex-1">
                                    <dl>
                                        <dt class="text-sm font-medium text-gray-500 truncate">System Monitoring</dt>
                                        <dd class="text-lg font-medium text-gray-900">Health & Metrics</dd>
                                    </dl>
                                </div>
                            </div>
                            <div class="mt-5">
                                <a href="/metrics" target="_blank" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out block text-center">
                                    View Metrics
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Observability Card -->
                    <div class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-4 py-5 sm:p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <svg class="h-8 w-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"/>
                                    </svg>
                                </div>
                                <div class="ml-5 w-0 flex-1">
                                    <dl>
                                        <dt class="text-sm font-medium text-gray-500 truncate">Observability</dt>
                                        <dd class="text-lg font-medium text-gray-900">Grafana Dashboards</dd>
                                    </dl>
                                </div>
                            </div>
                            <div class="mt-5 space-y-2">
                                <a href="http://localhost:3000" target="_blank" class="w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out block text-center text-sm">
                                    Grafana
                                </a>
                                <a href="http://localhost:16686" target="_blank" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out block text-center text-sm">
                                    Jaeger Tracing
                                </a>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Quick Stats -->
                <div class="mt-8">
                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Quick Stats</h3>
                    <div class="bg-white shadow rounded-lg p-6">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-blue-600" v-text="stats.uploads">-</div>
                                <div class="text-sm text-gray-500">Total Uploads</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-green-600" v-text="stats.evaluations">-</div>
                                <div class="text-sm text-gray-500">Evaluations</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-purple-600" v-text="stats.completed">-</div>
                                <div class="text-sm text-gray-500">Completed</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-orange-600" v-text="stats.avgTime">-</div>
                                <div class="text-sm text-gray-500">Avg Time (s)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    stats: {
                        uploads: 0,
                        evaluations: 0,
                        completed: 0,
                        avgTime: 0
                    }
                }
            },
            mounted() {
                this.loadStats();
            },
            methods: {
                async loadStats() {
                    try {
                        // Mock stats for now - in real implementation would fetch from /admin/api/stats
                        this.stats = {
                            uploads: Math.floor(Math.random() * 100) + 20,
                            evaluations: Math.floor(Math.random() * 80) + 15,
                            completed: Math.floor(Math.random() * 70) + 10,
                            avgTime: (Math.random() * 20 + 15).toFixed(1)
                        };
                    } catch (error) {
                        console.error('Failed to load stats:', error);
                    }
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
